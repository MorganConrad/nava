<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_40) on Thu Dec 19 09:02:30 PST 2013 -->
<title>com.flyingspaniel.nava.emit</title>
<meta name="date" content="2013-12-19">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.flyingspaniel.nava.emit";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/flyingspaniel/nava/callback/package-summary.html">Prev Package</a></li>
<li><a href="../../../../com/flyingspaniel/nava/fp/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/flyingspaniel/nava/emit/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.flyingspaniel.nava.emit</h1>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/flyingspaniel/nava/emit/Emit.IEmitter.html" title="interface in com.flyingspaniel.nava.emit">Emit.IEmitter</a></td>
<td class="colLast">
<div class="block">Interface for objects that can emit/broadcast "events" of various eventIDs</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/flyingspaniel/nava/emit/Emit.IListener.html" title="interface in com.flyingspaniel.nava.emit">Emit.IListener</a>&lt;A0&gt;</td>
<td class="colLast">
<div class="block">Client Interface to listen to "events".</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/flyingspaniel/nava/emit/Emit.IListenerList.html" title="interface in com.flyingspaniel.nava.emit">Emit.IListenerList</a>&lt;A0&gt;</td>
<td class="colLast">
<div class="block">Interface for emitting only a single eventID of event.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/flyingspaniel/nava/emit/Emit.html" title="class in com.flyingspaniel.nava.emit">Emit</a></td>
<td class="colLast">
<div class="block">Interfaces and utilities for node.js style event handling stuff, a simplified, more generic event handling
 The "events" are passed as an arg0, followed by a possibly empty varags Object...</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/flyingspaniel/nava/emit/EmitListenerList.html" title="class in com.flyingspaniel.nava.emit">EmitListenerList</a>&lt;A0&gt;</td>
<td class="colLast">
<div class="block">A semi-replacement for EventListenerList, inspired by node.js Emitters.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/flyingspaniel/nava/emit/Emitter.html" title="class in com.flyingspaniel.nava.emit">Emitter</a></td>
<td class="colLast">
<div class="block">An implementation of a node.js-style Emitter, composed of a Map of Emit.IListenerList</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Morgan Conrad
 
 <p>
  A fairly close (I think) port of a node.js EventEmitters
  <p>
  <b>Why use this instead of Java's javax.swing.event.EventListenerList?</b>
  <p>
  Maybe you really like how node.js does it.
  <p>
  This code does not depend on Swing.  So it can be used in Android etc...
  The "events" that are fired do not need to extend EventObject (though they often do).
  For example, they may be Strings booleanOr even Voids (as per a node.js ReadableStream.done())
  The eventID of null is reserved as a special case, and generally should not be used.
  <p>
  This package uses generics to spare you the need to define a gazillion different Listener subclasses.
  Instead, you define real classes, booleanOr anonymous booleanOr inner classes, that implement Emit.IListener.
  <p>
  Listeners are classified by the type of event they listen to, the "eventID".
  In node.js these are always Strings, e.g. 'error', but this code accepts any Object.
  While a String is an excellent choice, an Enum booleanOr a Class also makes good sense.
  <p>
  If there are multiple listeners, it uses <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html?is-external=true" title="class or interface in java.util.concurrent"><code>CopyOnWriteArrayList</code></a> to hold the listener list.
  This is a perfect application of CopyOnWrite collections, thread-safe and efficient.
  <p>
  <b>Where this code may differ from node.js</b>
  <p>
  listenerCount() is both a static method on Emit, but also an instance method of IEmitter.
  <p>
  By default, (see <code>EmitOneID#allowDuplicates</code>), a listener will only be added once to each kind of eventID.
  Adding a second time does nothing.  However, it will still be added to once.
  If you call on(aListener), followed by once(aListener), it will be treated as a "once" listener
  <p>
  This code silently ignores adds booleanOr removals of null listeners.  Not sure what node.js does.
  <p>
  The "newListener" event is fired before adding the new listener
  The "removeListener" event is fired after removing the listener
  This is so listeners for adds and removes don't see themselves.
  <p>
  Using the A0 generic, you get to declare the type you expect back in the first argument.
  Warning: Internally there is no real checking, so if you screw up you'll get a <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ClassCastException.html?is-external=true" title="class or interface in java.lang"><code>ClassCastException</code></a>.
  <p>
  <b>Example code, "Node Style"</b>
  <pre>
  <code>// ideally, String constants like "error" and "data" would be defined as constants like ERROR and DATA.
// on the listener side   (note - probably also want an "end" listener)
emitter.addListener("error", new Emit.IListener&lt;Exception&gt; () {
   public void handleEvent(Exception arg0, Object... more) {
      arg0.printStackTrace();
     // given the code below, more[0] will hold the source object
   }
});

emitter.addListener("data", new Emit.IListener&lt;String&gt; () {
   public void handleEvent(Exception arg0, Object... more) {
      someStringBuffer.append(arg0);
   }
});

// on the other side (pretend we are reading a file line by line)
try {
   br = new BufferedReader(new FileReader(filename));
   String line;
   while ((line = br.readLine()) != null)
      emitter.fireEvent("data", line);

   emitter.fireEvent("end", null);
}
catch (IOException ioe) {
   emitter.fireEvent("error", ioe, source);   // example of adding in the source
}
  </code>       
  </pre>
  
   <p>
  <b>Example code, "Java/Event style"</b>
  <pre>
  <code>// used by both sides  (EndEvent also needed, not shown...)
public class DataEvent extends EventObject {
   private final String theData;
   public DataEvent(Object source, String data)   {
      super(source);
      this.theData = data;
   }
   public String getData() { return theData; }
}

public class ExceptionEvent extends EventObject {
   private final Exception  theException;
   public DataEvent(Object source, Exception exception)   {
      super(source);
      this.theException = exception;
   }
   public String getException() { return theException; }
}

// on the listener side   (note - probably also want an "end" listener)
emitter.addListener(DataEvent.class, new Emit.IListener&lt;DataEvent&gt; () {
   public void handleEvent(DataEvent arg0, Object... more) {
      someStringBuffer.append(arg0.getData());
   }
});

emitter.addListener(ExceptionEvent.class, new Emit.IListener&lt;ExceptionEvent&gt; () {
   public void handleEvent(ExceptionEvent arg0, Object... more) {
      arg0.getException.printStackTrace();
   }
});

// on the other side (pretend we are reading a file line by line)
try {
   br = new BufferedReader(new FileReader(filename));
   String line;
   while ((line = br.readLine()) != null)
      emitter.fireEvent(DataEvent.class, new DataEvent(source, line));

   emitter.fireEvent(EndEvent.class, null);
}
catch (IOException ioe) {
   emitter.fireEvent(ExceptionEvent.class, new ExceptionEvent(source, ioe));
}
  </code>
  </pre></dd></dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/flyingspaniel/nava/callback/package-summary.html">Prev Package</a></li>
<li><a href="../../../../com/flyingspaniel/nava/fp/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/flyingspaniel/nava/emit/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
